<div class="user-add">
	<h1>Create new User Account</h1>
	<div class="container">
		<form [formGroup]="form">
			<mat-form-field appearance="outline">
				<mat-label>Enter your first name</mat-label>
				<input
					matInput
					placeholder="John"
					formControlName="firstName"
				/>
				<mat-error *ngIf="form.controls['firstName'].invalid"
					>First name must be at least 2 characters long and at most 25
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Enter your last name</mat-label>
				<input
					matInput
					placeholder="Smith"
					formControlName="lastName"
				/>
				<mat-error *ngIf="form.controls['lastName'].invalid"
					>Last name must be at least 2 characters long and at most 25
				</mat-error>
			</mat-form-field>
			<mat-form-field appearance="outline">
				<mat-label>Enter your email</mat-label>
				<input
					matInput
					placeholder="pat@example.com"
					formControlName="email"
				/>
				<mat-error *ngIf="form.controls['email'].invalid">
					<span *ngIf="form.controls['email'].errors?.['required']">
						This field is required
					</span>
					<span *ngIf="form.controls['email'].errors?.['email']">
						Enter the correct email
					</span>
					<span *ngIf="form.controls['email'].errors?.['emailExists']">
						Email already exist
					</span>
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Enter your password</mat-label>
				<input
					matInput
					[type]="isHide ? 'password' : 'text'"
					formControlName="password"
				/>
				<button
					type="button"
					mat-icon-button
					matSuffix
					(click)="$event.stopPropagation(); isHide = !isHide"
					[attr.aria-label]="'Hide password'"
					[attr.aria-pressed]="isHide"
				>
					<mat-icon>{{ isHide ? 'visibility_off' : 'visibility' }}</mat-icon>
				</button>
				<mat-error *ngIf="form.controls['password'].invalid"
					>Required minimum eight characters, at least one letter and one number
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-label>Confirm your password</mat-label>
				<input
					matInput
					[type]="isConfirmHide ? 'password' : 'text'"
					formControlName="confirmPassword"
				/>
				<button
					type="button"
					mat-icon-button
					matSuffix
					(click)="$event.stopPropagation(); isConfirmHide = !isConfirmHide"
					[attr.aria-label]="'Hide password'"
					[attr.aria-pressed]="isConfirmHide"
				>
					<mat-icon>{{
						isConfirmHide ? 'visibility_off' : 'visibility'
					}}</mat-icon>
				</button>
				<mat-error
					*ngIf="form.controls['confirmPassword'].hasError('passwordMismatch')"
				>
					Passwords do not match
				</mat-error>
				<mat-error
					*ngIf="form.controls['confirmPassword'].hasError('required')"
				>
					Passwords must be enter
				</mat-error>
			</mat-form-field>

			<mat-form-field appearance="outline">
				<mat-select formControlName="roleId">
					<mat-option
						[value]="role.id"
						*ngFor="let role of roles$ | async"
					>
						{{ role.name }}
					</mat-option>
				</mat-select>
				<mat-label>Role</mat-label>
			</mat-form-field>

			<button
				mat-raised-button
				color="primary"
				(click)="addUser()"
			>
				Add
			</button>
			<button
				mat-raised-button
				routerLink="/user"
			>
				Close
			</button>
		</form>
		<img
			src="../assets/images/user-add-logo.PNG"
			alt="user logo"
		/>
	</div>
</div>
