<app-stripe-loader [isLoading]="isLoading"></app-stripe-loader>

<app-sidebar
	[categories]="categories"
	[isOpened]="isOpened"
	[isUserCanModCat]="isUserCanModCat"
	(closeSidebar)="isOpened = $event"
	(currentCategory)="searchParams.categoryId = $event"
	(currentSubCategory)="searchParams.subCategoryId = $event"
>
</app-sidebar>

<main class="post-list">
	<div class="search-block">
		<button
			mat-icon-button
			(click)="isOpened = true"
			class="small-screen-element"
		>
			<mat-icon>menu</mat-icon>
		</button>
		<input
			type="text"
			class="search"
			placeholder="🔍 search"
			(input)="changeSearchPhrase($event.target)"
		/>
		<button
			mat-button
			class="button-add"
			routerLink="/post/add"
		>
			<mat-icon>add</mat-icon>
			Add new post
		</button>

		<button
			mat-icon-button
			class="button-add__icon"
			routerLink="/post/add"
		>
			<mat-icon>add</mat-icon>
		</button>
	</div>

	<div class="post-list__content">
		<mat-card
			matRipple
			class="post"
			[routerLink]="['/post', post.id]"
			*ngFor="
				let post of posts
					| postFilter: searchParams.categoryId:searchParams.subCategoryId
					| postSearch: searchParams.phrase
			"
		>
			<mat-card-title>{{ post.title }}</mat-card-title>
			<mat-card-content>{{
				post.contentHTML | contentShortner | tagRemove
			}}</mat-card-content>
		</mat-card>
		<div class="no-content">No posts here</div>
	</div>
</main>
